{# templates/feed/baagl/inbound.html.twig #}
{% extends 'base.html.twig' %}

{% block title %}Inbound Baagl{% endblock %}

{% block body %}


  <h3>Načíst položky z HTML souboru</h3>
  {# form_start nastaví enctype sám, když je ve formu FileType #}
  {{ form_start(form) }}
    {{ form_row(form.html_file) }}
    <button class="btn">Načíst</button>
  {{ form_end(form) }}

  {% if result is defined and result %}
    <div class="mt-6">
      <button onclick="const e=document.getElementById('orderDetails'); e.style.display = (e.style.display==='none' ? 'block' : 'none');">
        Zobrazit / skrýt detaily
      </button>

      <div id="orderDetails" style="display:block">
        <table class="table">
          <thead>
            <tr>
              <th>Kód</th><th>Název</th><th>MJ</th><th>Množství</th>
              <th>Cena bez DPH</th><th>Cena s DPH</th><th>Součet s DPH</th><th>Měna</th>
            </tr>
          </thead>
          <tbody>
          {% for item in result.items %}
            <tr>
              <td>{{ item.code }}</td>
              <td>{{ item.name }}</td>
              <td>{{ item.uom }}</td>
              <td>{{ item.qty }}</td>
              <td>{{ item.priceWithoutVat|number_format(2, ',', ' ') }}</td>
              <td>{{ item.priceVat|number_format(2, ',', ' ') }}</td>
              <td>{{ item.priceVatSum|number_format(2, ',', ' ') }}</td>
              <td>{{ item.currency }}</td>
            </tr>
          {% endfor %}
          </tbody>
          <tfoot>
            <tr>
              <td></td>
              <td><strong>Součet</strong></td>
              <td></td>
              <td><strong>{{ result.sumQty }}</strong></td>
              <td></td>
              <td></td>
              <td><strong>{{ result.sumPrice|number_format(2, ',', ' ') }}</strong></td>
              <td></td>
            </tr>
          </tfoot>
        </table>
      </div>
    </div>
  {% endif %}

  <hr>
  <form method="get">
    <input name="q" value="{{ q }}" placeholder="hledat SKU/EAN/název">
    <button>Hledat</button>
  </form>

  <table border="1" cellpadding="6">
    <tr>
      <th>ID</th><th>Kód</th><th>Název</th><th>MJ</th><th>Množství</th><th>Nákup bez DPH</th><th>Nákup s DPH</th><th>Měna</th>
    </tr>
    {% for r in rows %}
      <tr>
        <td>{{ r.id }}</td>
        <td>{{ r.code }}</td>
        <td>{{ r.nazev }}</td>
        <td>{{ r.uom }}</td>
        <td>{{ r.stav }}</td>
        <td>{{ r.nakupBezDph }}</td>
        <td>{{ r.nakupDph }}</td>
        <td>{{ r.mena }}</td>
      </tr>
    {% else %}
      <tr><td colspan="8">Žádná data.</td></tr>
    {% endfor %}
  </table>
{% endblock %}
